# bluegenes-go-concept-relation

#### Show which genes are associated with each enriched GO term

This visualization should only support `ids` for multiple genes.

It should have a filter panel similar to the one in [bluegenes-GO-term-visualizer](https://github.com/intermine/bluegenes-GO-term-visualizer/blob/master/preview.png), except with only the *Ontology* filter, so it can probably be made more compact.

It should show a graph of all the GO terms related to the genes in the list, with lines between the GO terms and genes that are related to each other. This is inspired by a graph generated by the [InterMineR package](https://github.com/intermine/interminer-workshop/blob/7925abb6206356c9d39a5b9cdf9678f678f3631f/Enrichment%20Analysis%20and%20Visualisations.ipynb) (it's directly below the **It's time for some graphs** header).

I think it would be more useful to display the GO term name (ie. *fatty acid binding* instead of *GO:0005504*) on the nodes. Clicking a gene or GO term should open a tooltip (or perhaps a window adjacent to the graph) with additional data on that gene or GO term (the extra data returned from the query should be sufficient to begin with).

Use the query (you'll have to translate this XML query to a JSON query used by [imjs](https://github.com/intermine/imjs/))
```
<query model="genomic" view="Gene.id Gene.symbol Gene.secondaryIdentifier Gene.primaryIdentifier Gene.organism.shortName Gene.organism.taxonId Gene.goAnnotation.evidence.code.code Gene.goAnnotation.ontologyTerm.identifier Gene.goAnnotation.ontologyTerm.name Gene.goAnnotation.ontologyTerm.namespace" sortOrder="Gene.symbol ASC" constraintLogic="B and C and D and E and F and A" name="intermod_go" >  <join path="Gene.goAnnotation" style="OUTER"/>  <constraint path="Gene.goAnnotation.qualifier" op="IS NULL" code="B" />  <constraint path="Gene.goAnnotation.ontologyTerm.obsolete" op="=" value="false" code="C" />  <constraint path="Gene" code="A" op="LOOKUP" value="2623,128" extraValue="H. sapiens"/>  <constraint path="Gene.goAnnotation.evidence.code.code" op="ONE OF" code="E"><value>EXP</value><value>IDA</value><value>IPI</value><value>IMP</value><value>IGI</value><value>IEP</value><value>TAS</value><value>IC</value></constraint></query>
```
where the **LOOKUP Gene value** (`2623,128` in this example) should be replaced with the gene object ID's passed from BlueGenes. The response should give you sufficient data to build up the graph. Remember to filter away the ontology namespaces which aren't active in the *Ontology* filter.

I think [Cytoscape.js](https://js.cytoscape.org/) would be a good fit for building this visualization, although we welcome any other library (or DIY) which you feel may be more suitable.

Feel free to rename this file to `PLAN.md` once you have a proper `README.md`.
